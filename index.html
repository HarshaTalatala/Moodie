<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moodie ğŸŒ¸</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <main class="container" aria-label="Mood Journal">
    <header>
      <h1 tabindex="0">ğŸŒ¸ Moodie â€“ Your Mood Journal ğŸŒ¸</h1>
    </header>
    <form id="moodForm" autocomplete="off" aria-label="Mood Entry Form">
      <label for="mood" class="sr-only">How are you feeling today?</label>
      <div class="mood-buttons" role="group" aria-label="Mood selection">
        <button type="button" data-mood="ğŸ˜Š" aria-label="Happy">ğŸ˜Š</button>
        <button type="button" data-mood="ğŸ˜¢" aria-label="Sad">ğŸ˜¢</button>
        <button type="button" data-mood="ğŸ˜" aria-label="Loved">ğŸ˜</button>
        <button type="button" data-mood="ğŸ˜¡" aria-label="Angry">ğŸ˜¡</button>
        <button type="button" data-mood="ğŸ˜´" aria-label="Tired">ğŸ˜´</button>
      </div>
      <input type="hidden" id="mood" name="mood" required>
      <label for="note">Write a little note ğŸ‘»</label>
      <textarea id="note" name="note" placeholder="Type here..." rows="3" maxlength="200" aria-label="Note"></textarea>
      <button type="submit" class="save-btn">Save Entry âœ¨</button>
    </form>
    <section aria-label="Past Entries">
      <h2 tabindex="0">Your Past Entries ğŸ“–</h2>
      <ul id="entries" aria-live="polite"></ul>
    </section>
  </main>

  <!-- Custom Delete Confirmation Modal -->
  <div id="deleteModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
      <div class="modal-header">
        <h3>ğŸ—‘ï¸ Delete Entry</h3>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this mood entry?</p>
        <p class="modal-warning">This action cannot be undone.</p>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-cancel" id="cancelDelete">Cancel</button>
        <button class="modal-btn modal-confirm" id="confirmDelete">Delete</button>
      </div>
    </div>
  </div>

  <!-- Custom Mood Selection Modal -->
  <div id="moodModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
      <div class="modal-header mood-modal-header">
        <h3>ğŸ˜Š Please Select a Mood</h3>
      </div>
      <div class="modal-body">
        <p>Don't forget to pick how you're feeling today!</p>
        <p class="modal-suggestion">Choose one of the mood buttons above to continue.</p>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-ok" id="okMood">Got it! ğŸ’–</button>
      </div>
    </div>
  </div>
  
  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, orderBy, query, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

    // TODO: Add your Firebase project's configuration
    const firebaseConfig = {
    apiKey: "AIzaSyCpl1FIOxkqa6_3XTFj-qDaoAycCfwJhfE",
    authDomain: "moodieee.firebaseapp.com",
    projectId: "moodieee",
    storageBucket: "moodieee.firebasestorage.app",
    messagingSenderId: "589920406555",
    appId: "1:589920406555:web:b925ae29cdfc1d53a33cbe",
    measurementId: "G-3B4YBX06T7"
  };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Make Firebase functions available globally
    window.firebaseDB = db;
    window.firebaseCollection = collection;
    window.firebaseAddDoc = addDoc;
    window.firebaseGetDocs = getDocs;
    window.firebaseDeleteDoc = deleteDoc;
    window.firebaseDoc = doc;
    window.firebaseQuery = query;
    window.firebaseOrderBy = orderBy;
    window.firebaseServerTimestamp = serverTimestamp;
  </script>
  <script src="script.js"></script>
</body>
</html>